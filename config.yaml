schemaVersion: "2.0.0"

commandTests:
  - name: "terraform installation"
    command: "terraform"
    args: ["--help"]
    expectedOutput: ["Usage: terraform.*"]

  - name: "Calico CLI installation"
    command: "calicoctl"
    args: ["--help"]
    expectedOutput: ["Usage:\n.*calicoctl.*"]

  - name: "IBM Cloud CLI installation"
    command: "ibmcloud"
    args: ["--help"]
    expectedOutput: ["NAME:\n.*ibmcloud.*"]

  - name: "IBM Cloud container-service plugin"
    command: "ibmcloud"
    args: ["plugin", "list"]
    expectedOutput: [".*container-service/kubernetes-service.*"]

  - name: "IBM Cloud container-registry plugin"
    command: "ibmcloud"
    args: ["plugin", "list"]
    expectedOutput: [".*container-registry.*"]

  - name: "IBM Cloud cloud-databases plugin"
    command: "ibmcloud"
    args: ["plugin", "list"]
    expectedOutput: [".*cloud-databases.*"]

  - name: "Kubectl CLI installation"
    command: "kubectl"
    args: ["version", "--client=true"]
    expectedOutput: ["Client Version.*"]

  - name: "Helm CLI installation"
    command: "helm"
    args: ["version", "-c"]
    expectedOutput: ["Client.*"]

  - name: "Git installation"
    command: "git"
    args: ["version"]
    expectedOutput: ["git version.*"]

#  - name: "Docker CLI installation"
#    command: "docker"
#    args: ["--help"]
#    expectedOutput: ["Usage:.*docker.*"]

#  - name: "nvm installation"
#    command: "which"
#    args: ["nvm"]
#    expectedOutput: ["/home/devops/.nvm/bin/nvm\n"]
#
#  - name: "node installation"
#    command: "node"
#    args: ["--version"]
#    expectedOutput: ["v\\d\\d[.]\\d\\d[.]\\d\n"]
#
#  - name: "yo installation"
#    command: "yo"
#    args: ["--version"]
#    expectedOutput: ["\\d[.]\\d[.]\\d\n"]

fileExistenceTests:
  - name: 'jenkins-config-template.xml'
    path: '/home/devops/etc'
    shouldExist: true

  - name: "terraform-provider-helm.*"
    path: "/home/devops/.terraform.d/plugins"
    shouldExist: true

  - name: "terraform-provider-kubernetes.*"
    path: "/home/devops/.terraform.d/plugins"
    shouldExist: true

  - name: "terraform-provider-ibm.*"
    path: "/home/devops/.terraform.d/plugins"
    shouldExist: true
